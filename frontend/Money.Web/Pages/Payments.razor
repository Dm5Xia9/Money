@page "/payments"
@attribute [Authorize]

<PageTitle>Операции</PageTitle>

@if (_init == false)
{
    <MudProgressLinear Indeterminate />
}

<MudTabs Elevation="4" Outlined>
    <MudTabPanel ID="1" Text="Список операций">
        <MudStack Class="mt-3" Spacing="2">
            <MudItem>
                <PaymentDialog CreateMode="PaymentDialog.Mode.Add"
                               Payment="@(new Payment { Date = DateTime.Now, Category = Category.Empty })"
                               OnSubmit="AddNewPayment" />
            </MudItem>
            @foreach (PaymentsDay paymentsDay in PaymentsDays ?? [])
            {
                <PaymentsDayCard PaymentsDay="@paymentsDay"
                                 PaymentTypes="@PaymentTypes.Values"
                                 OnAddPayment="x => paymentsDay.Payments.Add(x)"
                                 OnRestore="Restore"
                                 OnDelete="Delete">
                </PaymentsDayCard>
            }
        </MudStack>
    </MudTabPanel>
    <MudTabPanel Text="Регулярные операции" ID="2">
        =)
    </MudTabPanel>
    <MudTabPanel Text="Быстрые операции" ID="3">
        =)
    </MudTabPanel>
</MudTabs>
