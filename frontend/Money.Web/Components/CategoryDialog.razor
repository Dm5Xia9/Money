<EditForm Model="@Input"
          OnValidSubmit="SubmitAsync">
    <DataAnnotationsValidator />
    <MudDialog>
        <TitleContent>
            <MudText Typo="Typo.h6">
                @MudDialog.Title
            </MudText>
        </TitleContent>
        <DialogContent>
            <MudStack Spacing="3">
                <MudTextField AutoGrow
                              @bind-Value="@Input.Name"
                              Clearable
                              For="@(() => Input.Name)"
                              HelperText="Отображаемое имя"
                              Label="Наименование"
                              Required
                              Variant="Variant.Text" />

                <MudNumericField @bind-Value="@Input.Order"
                                 DebounceInterval="500"
                                 For="@(() => Input.Order)"
                                 HelperText="Меньше -> выше"
                                 Label="Значение для сортировки" />

                <MudStack Spacing="0">
                    <MudText Typo="Typo.subtitle2">Цвет</MudText>
                    <MudColorPicker @bind-Text="@Input.Color"
                                    ColorPickerMode="ColorPickerMode.HEX"
                                    PickerVariant="PickerVariant.Static"
                                    Rounded
                                    ShowAlpha
                                    ShowColorField
                                    ShowInputs
                                    ShowModeSwitch
                                    ShowPreview
                                    ShowSliders
                                    ShowToolbar />
                </MudStack>
            </MudStack>
        </DialogContent>
        <DialogActions>
            <MudButton OnClick="Cancel">Отмена</MudButton>
            <MudButton ButtonType="ButtonType.Submit"
                       Color="Color.Success"
                       Disabled="@_isProcessing">
                @if (_isProcessing)
                {
                    <MudProgressCircular Class="ms-n1"
                                         Indeterminate="true"
                                         Size="Size.Small" />
                }
                else
                {
                    <MudText Typo="Typo.button">Сохранить</MudText>
                }
            </MudButton>
        </DialogActions>
    </MudDialog>
</EditForm>
